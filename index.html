<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
</head>
<body>
  <a-scene xr-mode-ui="enabled: true" background="color: #000">
    <a-entity id="satellite" position="0 0 -5"></a-entity>
    <a-entity camera wasd-controls look-controls></a-entity>
  </a-scene>

  <input id="prompt" placeholder="Ask about a satellite..." style="width:100%;padding:10px;font-size:18px;">
  <button onclick="generate()">Go</button>

  <script>
    async function generate() {
      const prompt = document.getElementById('prompt').value;
      const res = await fetch('https://replit.com/@mannatchauhan20/xr-satviz-llm', { method: 'POST', body: prompt });
      const data = await res.json();
      updateScene(data);
    }

    function updateScene(data) {
      const sat = document.getElementById('satellite');
      sat.setAttribute('gltf-model', '#satellite-glb');
      sat.object3D.position.set(data.x, data.y, data.z);
      // Add latency ring
      const ring = document.createElement('a-ring');
      ring.setAttribute('radius-inner', 0.1);
      ring.setAttribute('radius-outer', data.latency / 10);
      ring.setAttribute('color', data.latency < 50 ? 'green' : 'red');
      document.querySelector('a-scene').appendChild(ring);
    }
  </script>
</body>
</html>